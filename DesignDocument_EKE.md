## *Design Document*
# **Eddy Kinetic Energy Climatology Mapping**

#### Kevin Rosa
June 18, 2018



Table of Contents  
====================
1. [Summary](#summary)  
1. [Requirements](#requirements)  
1. [Physics](#physics)
1. [Design and Implementation](#design)
1. [Testing](#testing)
1. [Next Steps](#next)
1. [Bibliography](#bibliography)

----------------

<a name="summary"/>
# Summary

The document describes a new feature which will be added to the MPAS-Analysis
tools package: visualization of Eddy Kinetic Energy (EKE).
The EKE over much of the ocean is at least an order of magnitude greater than
the mean kinetic energy (MKE) (Wytrki, 1976).
This variability and can transport momentum, heat, mass, and chemical
constituents of seawater (Robinson, 1983).
For high-resolution eddy-permitting MPAS-O experiments, it is important that
researchers have tools to visualize model predictions of EKE in order to
compare the model EKE to observations.

<a name="requirements"/>
# Requirements

The primary design consideration for this feature is that it integrate
seamlessly with the rest of the analysis tools.
To this end, the sea surface height (SSH) plotting tools will be used as a
template.

Files to create:
- `mpas_analysis/ocean/climatology_map_eke.py`
- `docs/tasks/climatologyMapEKE.rst`

Files to edit:
- `mpas_analysis/ocean/__init__.py`
- `docs/analysis_tasks.rst`
- `docs/api.rst`
- `mpas_analysis/config.default`

The EKE plot will not require any additional input files.
The only new concern is an oceanographic one: EKE is most relevant for  
eddy-permitting configurations of the model.  

Unlike temperature or SSH, EKE is not a field that is solved for in MPAS-O.

mpasField = (ds.timeMonthly_avg_velocityZonalSquared[0,0,:,:].values - ds.timeMonthly_avg_velocityZonal[0,0,:,:].values**2 + \
        ds.timeMonthly_avg_velocityMeridionalSquared[0,0,:,:].values - ds.timeMonthly_avg_velocityMeridional[0,0,:,:].values**2)/2.


Calculations and spatial interpolation performed in `mpas_analysis/ocean/climatology_map_eke.py`.
Colormaps are set in `docs/tasks/climatologyMapEKE.rst`.  
Actual plotting is done in `mpas_analysis/shared/plot/plotting.py`.

Surface EKE only (?)

Fields to read in (specified in config.myrun):
- `timeMonthly_avg_velocityZonal`, `timeMonthly_avg_velocityMeridional`
- `timeMonthly_avg_velocityZonalSquared`, `timeMonthly_avg_velocityMeridionalSquared`

<a name="physics"/>
# Physics

In the ocean, it is convenient to separate the the horizontal current, *u*,
into its mean and eddy components:  
<a href="" target="_blank"><img src="https://latex.codecogs.com/gif.latex?u=\bar{u}+u'" title="u = ubar + uprime" /></a>  

This approach separates the total kinetic energy into mean kinetic energy
(MKE) and eddy kinetic energy (EKE).

### Explicitly resolved vs. sub-grid scale processes
Processes in the ocean occur across scales ranging from thousands of kilometers (tides and Rossby waves) to centimeters (capillary waves) and all the way down to molecular diffusion.
A wave must have a wavelength longer than 4 grid cells in order to be resolved in a numerical model so all of the small sub-grid scale processes must be parameterized.

Notes

- "...The named ocean currents, such as the Gulf Stream and the Peru Current... are the home of "rings" spun off from major currents, and they have a complex eddy structure of their own." (Knauss p.186)
- "The energy sources are varied. They include Gulf Stream rings and analogous phenomena associated with other major currents, turbulence generated by currents passing over complex bottom topography and coastal jets associate with upwelling.  The strongest eddies are found near the strong western boundary currents." (Knauss p.186)
- Wytrki 1976
  - "The results are consistent with the idea that eddy motion in the ocean is generated in areas of strong mean shear flow and is subsequently distributed over the whole ocean."
  - E_mean / E_eddy
    - Gulf stream: 2
    - Subtropical gyre: 1/20 - 1/40
- "The kinetic energy of mesoscale variability (scales of tens to hundreds of km and tens to hundreds of days) is more than an order of magnitude greater than the mean kinetic energy over most of the ocean [Wyrtki et al., 1976; Richardson, 1983]. Mesoscale variability occurs as linear Rossby waves and as nonlinear vortices or eddies. In contrast to linear waves, nonlinear vortices can transport momentum, heat, mass and the chemical constituents of seawater, and thereby contribute to the general circulation, large‚Äêscale water mass distributions, and ocean biology [Robinson, 1983]." (Chelton 2007)
-


# Next Steps


For now, the focus is only on climatology plots but the next step would be to add time series functionality.  
Additionally, EKE data should be added to the observational data that can be downloaded via the `download_analysis_data.py` function.


<a name="bibliography"/>
# Bibliography
